\chapter{Background}
\section{Cyber Physical Systems}
\subsection{Hybrid Systems}
A system with both continuous (frequently physical) components and discrete (frequently digital)
components is said to be a \emph{hybrid system}, named for its characteristic blending of the
two domains. Examples of hybrid computer systems abound in industrial controls, for example,
although hybrid systems may also be fully physical (e.g., a bouncing ball experiences continuous
behavior when rising and falling and discrete behavior when colliding with a surface).

The term hybrid system is an older one that was coined as researchers began to study the newly
pervasive reactive systems that arose as programmed control of the physical world became 
widespread ~\cite{alur1993hybrid}. For several reasons it does not suffice to describe precisely
the types of systems with which this work is concerned: a subset of hybrid
systems that incorporate a significant computer and networking component.

Nevertheless, the modeling of hybrid systems is well studied and provides a sufficient body
of relevent knowledge from which to draw to warrant its inclusion. This chapter includes
background on a particularly relevent modeling framework for hybrid systems called the
hybrid automaton, which is used in this thesis as the standard benchmark against which to
compare hybrid modeling techniques.
\subsection{Cyber Physical Systems}
\subsubsection{Definition}
% Definition
A newer, better term for the systems investigated in this thesis is \emph{cyber physical systems}.
Put simply, a cyber physical system is a networked hybrid system: a networked computer system that is 
tightly coupled to the physical world. 
\subsubsection{Challenges}
According to the 2008 Report of the Cyber-Physical Systems Summit, ``The principal barrier to 
developing CPS is the lack of a theory that comprehends cyber and physical resources in a 
single unified framework.''~\cite{summitreport2008}

The summit further identified as part of the scientific and technological foundations of
cyber physical systems both new modeling frameworks that ``explicitly address new observables'' and 
studies of privacy, trust, and security including ``theories of cyber-physical inter-dependence''~\cite{summitreport2008},
a major theme of this work.

Crenshaw and Beyer enumerated four principal challenges in cyber physical systems testing that are
equally apt for security:
their concentration in safety critical domains, their frequent integration of third-party or
otherwise unrelated systems, their dependence upon unreliable data collection, and their
pervasiveness~\cite{crenshaw2010upbot}.
\subsection{Hybrid Automata}
\subsubsection{Definition}
A valuable formalism for modeling hybrid systems in isolation and with limited composition
is the hybrid automaton of Alur, et al.~\cite{alur1993hybrid}. This section introduces the
version of the formalism described in 1996 by Henzinger~\cite{henzinger1996theory}, to which a
reader interested in more than a superficial understanding is referred. 

Formally,
a hybrid automaton $H$ is made up of a set of real-valued state variables, their first derivatives,
a set of operational modes and switches between the modes, and predicates attached to those modes and
switches describing the operation of the system in those modes and the discrete transitions between
them. One can think of a hybrid automaton as a pairing of a finite state machine whose states (called
modes) and transitions (called switches) denote the discrete-domain behavior of the hybrid system, with
a set of differential equations attached to each mode, which govern its continuous-domain behavior. Switches
may also be labeled in order to permit synchronization across composed hybrid automata.

Modes may be decorated with invariant conditions (which state whether the system is allowed to be in that mode),
flow conditions (which state how the continuous domain state variables are permitted to evolve while in that
mode), and initial conditions (which state under which, if any, conditions the automaton may begin its operation
with that mode). Switches are decorated with jump conditions, which serve as guards on the switch determining
both (1) when the switch is allowed to be taken, and (2) the discrete changes in state variables due to that
switch's activation.

A simple example of a hybrid automaton is given in Fig.~\ref{fig:thermostat}, which models a simple
heater thermostat. The nodes in the automaton represent its operating modes, and the edges represent
switches. In the ``Off'' mode, the temperature (given by $x$) must be greater than or equal to 18, and
its first derivative with respect to time (denoted $\dot{x}$) is $-0.1x$, which represents a cooling of
the environment. When the temperature is strictly less than 19, the switch from off to on is available (but
not mandatory until the off mode's invariant condition $x \geq 18$ ceases to be satisfied. The switch from
on to off behaves similarly.

\begin{figure}[t]
\centering
\begin{dot2tex}[options=-t raw --autosize]
digraph G {
    rankdir=LR;
    
    Off [texlbl="$\begin{matrix} \text{Off} \\ \
    \dot{x} = -0.1x \\ \
    x \geq 18 \\ \
    \end{matrix}$"];
    
    On [texlbl="$\begin{matrix} \text{On} \\ \
    \dot{x} = 5 - 0.1x \\ \
    x \leq 22 \\ \
    \end{matrix}$"];
        
    Off -> On [label=" " texlbl="$x < 19$"];
    
    On -> Off [label=" " texlbl="$x>21$"];
}
\end{dot2tex}
\caption{Thermostat hybrid automaton~\cite{henzinger1996theory}}
\label{fig:thermostat}
\end{figure}

The hybrid automaton model is sufficiently rich to capture many hybrid systems. 
\subsubsection{Shortcomings}
There are some problems with the hybrid automaton model. A hybrid automaton is not guaranteed to
have a valid execution, and computing whether it does or not is non-trivial~\cite{lygeros1999existence}.
Model checking has been developed for only some subclasses of 
automata~\cite{henzinger1997hytech}~\cite{frehse2005phaver}, and many desirable
properties of them are undecidable~\cite{henzinger1998s}.

However, there are even more nagging problems when considering hybrid automata or their variants
for the study of cyber physical systems. One of the hallmarks of cyber physical systems is a
distributed and highly networked nature. While they provide a
natural model for the discrete-continuous boundary, hybrid automata have only a rudimentary
notion of communication, no clear means for specifying message passing, and when used in large
topologies have significant scaling problems, both computationally and cognitively.
\subsubsection{Alternatives}
Some attempts have been made to solve the problem of the hybrid automaton's unsatisfactory
capability for modeling networks and communication. Particularly, the designation of shared
actions and shared variables as ``input'' or ``output'' is a popular tactic, used in the
powerful hybrid I/O automaton~\cite{lynch1996hybrid}~\cite{lynch2001hybrid}, its descendent the
timed I/O automaton~\cite{kaynar2010theory}, and also in the PHAVer model 
checker~\cite{frehse2005phaver}.

The work of this thesis is also something of an outgrowth from an instance of this strategy in
which prototypical ``hybrid link automata'' were developed to model explicit communication channels.
An example of the cognitive scalability issues inherent with this design is given in Fig.~\ref{fig:linkmachine}.
This strategy may have a place in modeling some systems but falls short of the goal of 
modeling complex, interdependent networks of hybrid systems with more conventional computer networks.
\begin{figure}[t]
\centering
\begin{dot2tex}[options=-t raw --autosize]
digraph G {
    rankdir=LR;
    idle [shape=circle, texlbl= \
    "$ \begin{matrix} \lambda : \mu : \text{Idle} \\ \
    \dot{C}_{\lambda \mu} = 0 \\ \
    C_{\lambda \mu} = 0 \end{matrix} $"];
    
    transmit [shape=circle, texlbl= \
    "$ \begin{matrix} \lambda : \mu : \text{Transmit} \\ \
    \dot{C}_{\lambda \mu} = 1 \\ \
    C_{\lambda \mu} < l \wedge w_{\lambda}=1  \end{matrix}$"];
    
    wait [shape=circle, texlbl= \
    "$\begin{matrix} \lambda : \mu : \text{Wait} \\ \
    w_{\lambda}=1 \\ \
    \end{matrix}$"];
    
    transmit -> idle [label= " " \
    texlbl="$\begin{matrix} \lambda : D : \mu \\ \
    C_{\lambda \mu} < l \\ \
    C_{\lambda \mu} := 0 \wedge w_{\lambda}:=0 \
    \end{matrix}$"];
    
    idle -> transmit [label= " ", \
    texlbl= "$\begin{matrix} S : \lambda : \mu \\ \
    w_{\lambda}=0 \\ \
    w_{\lambda}:=1 \\ \
    \end{matrix}$"];
    
    idle -> wait [label= " ", \
    texlbl= "$\begin{matrix} S : \lambda : \mu \\ \
    w_{\lambda}=1 \\ \
    \end{matrix}$"];
    
    wait -> transmit [label= " ", \
    texlbl= "$\begin{matrix} \
    w_{\lambda}=0 \\ \
    w_{\lambda}:=1 \\ \
    \end{matrix}$"];
    
    wait -> wait [label= " ", \
    texlbl= "$\begin{matrix} S : \lambda : \mu \\ \
    \end{matrix}$"];
    
    idle -> idle [label= " ", \
    texlbl="$\lambda : D : \mu$"];
    
    idle -> transmit;
    
    transmit -> idle;
    idle -> idle [label= " ", \
    texlbl="$S : \lambda : \mu$"];
    
}
\end{dot2tex}
\caption{An example of a considered ``hybrid link automaton'' prototype modeling
a link on which messages may be dropped, injected, or delayed, and on which mutual
exclusion of messages is enforced.}
\label{fig:linkmachine}
\end{figure}
\section{Attack Graphs}
\section{Case Studies}